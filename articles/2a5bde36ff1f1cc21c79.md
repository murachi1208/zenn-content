---
title: "CentOS7.3 ç’°å¢ƒ(Vagrant)ã« AWS S3 äº’æ› Minio ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"
emoji: "ğŸ“"
type: "tech"
topics: Vagrant awscli minio
published: true
---

# Minio ã£ã¦ï¼Ÿ
goè¨€èªã§æ›¸ã‹ã‚ŒãŸAWS S3 äº’æ›ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€‚ä»–ã«S3äº’æ›ã¯ã€ŒGoogle Cloud Storage, Ceph Object Gateway, Riak CSã€ã¨ã‚ã‚‹ã‚‰ã—ã„ã‘ã© Minio ãŒå°å…¥ã™ã‚‹ã®ã¯ç°¡å˜ã§ã„ã„ã‚‰ã—ã„ã¨ã„ã†ã“ã¨ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ãŸã€‚ã€€â†’ã€€çµæœã€ç°¡å˜ã ã£ãŸï½—

> [https://www.minio.io/](https://www.minio.io/)

# ã‚µãƒ¼ãƒã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
goè¨€èªã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‘ã¤é…ç½®ã™ã‚Œã°çµ‚ã‚ã‚Šã€‚ã£ã¦æ„Ÿã˜ã€‚

## ã‚µãƒ¼ãƒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ã‚µãƒ¼ãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã€systemdã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦é…ç½®ã™ã‚‹ã€‚

```
$ sudo curl https://dl.minio.io/server/minio/release/linux-amd64/minio -o /usr/local/bin/minio
$ sudo chmod +x /usr/local/bin/minio
$ sudo curl https://raw.githubusercontent.com/minio/minio-service/master/linux-systemd/minio.service -o /etc/systemd/system/minio.service
$ sudo useradd -s /sbin/nologin minio-user
```

## ä¿å­˜å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ

```
$ sudo mkdir -p /var/lib/minio
$ sudo chown minio-user:minio-user /var/lib/minio
```

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
```MINIO_ACCESS_KEY``` ã¨ ```MINIO_SECRET_KEY``` ã¯ã€é©å½“ãªã‚»ã‚­ãƒ¥ã‚¢ãªæ–‡å­—åˆ—ã‚’ä½œæˆã—ã¦è¨­å®šã—ã¦ãŠã‘ã°okã€‚

```text:/etc/default/minio
# Local export path.
MINIO_VOLUMES="/var/lib/minio/"

# Use if you want to run Minio on a custom port.
MINIO_OPTS="--address :9000"

# Access Key of the server.
MINIO_ACCESS_KEY=AKIAIOSFODNN7EXAMPLE

# Secret key of the server.
MINIO_SECRET_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
```

## Minioã‚µãƒ¼ãƒ“ã‚¹å®šç¾©ã¨èµ·å‹•
èµ·å‹•ã«å¤±æ•—ã—ãŸå ´åˆã¯ã€```/var/log/messages``` ã‚’å‚ç…§ã™ã‚‹ã“ã¨ã€‚
â€»```sudo systemctl status minio``` ã‚³ãƒãƒ³ãƒ‰ã§ã‚‚ç¢ºèªã§ãã¾ã™ã€‚

```
$ sudo systemctl enable minio
$ sudo systemctl start minio
```

## èµ·å‹•ç¢ºèªã™ã‚‹
```sudo systemctl status minio``` ã‚³ãƒãƒ³ãƒ‰ã§ã‚‚ç¢ºèªã§ãã‚‹ãŒç°¡æ˜“WebãŒèµ·å‹•ã—ã¦ã„ã‚‹ã®ã§ ```http://127.0.0.1:9000``` ã§ç¢ºèªã—ã¦ã¿ã‚‹ã€‚

![image.png](https://qiita-image-store.s3.amazonaws.com/0/44540/d25a6b96-470b-bddd-317e-181cf4cd3f7b.png)

okok

# AWS CLI ã‚’ä½¿ã†
Minio ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ã‚‚ã‚ˆã„ãŒæŠ˜è§’ AWS S3äº’æ›ãªã®ã§ aws ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ã‚‹ã€‚

> [ã€æ‰‹é †ã€‘AWS CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆCentOS7ï¼‰](http://qiita.com/takahashi-kazuki/items/a0b737a3eaa2c9d6304f)

## AWS CLI ã‚’ã‚¤ãƒ³ã‚¹ãƒˆâ€•ãƒ«
ã¡ã‚‡ç°¡å˜ã‚„ã‚“ï½—

```
$ sudo curl "https://bootstrap.pypa.io/get-pip.py" -o "get-pip.py"
$ sudo python get-pip.py
$ sudo pip install awscli
```

aws configure ã§è¨­å®š

```
$ aws configure
AWS Access Key ID [None]: AKIAIOSFODNN7EXAMPLE
AWS Secret Access Key [None]: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
Default region name [None]: 
Default output format [None]: 
```

ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆã—ã¦lsã—ã¦ã¿ã‚‹

```
$ aws --endpoint-url http://localhost:9000 s3 mb s3://miniotest
make_bucket: miniotest
$ aws --endpoint-url http://localhost:9000 s3 ls
2017-08-03 03:46:03 miniotest
```

ã¸ãˆãƒ¼ç°¡å˜ã‚„ã‚“

# å‚è€ƒã«ã•ã›ã¦é ‚ã„ãŸã‚µã‚¤ãƒˆæ§˜

> [AWS S3äº’æ› minioã‚’CentOS7ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](http://qiita.com/uehatsu/items/1c00a84347c867b99ea0#minio%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%81%A8%E3%83%86%E3%82%B9%E3%83%88)
> [ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ Minioã§éŠã¶](http://masawada.hatenablog.jp/entry/2015/12/15/000000)
> [Minioå°å…¥æ‰‹é †(Ubuntu 16.04)](http://l-w-i.net/t/minio/0install_001.txt)
> [ã€æ‰‹é †ã€‘AWS CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆCentOS7ï¼‰](http://qiita.com/takahashi-kazuki/items/a0b737a3eaa2c9d6304f)







