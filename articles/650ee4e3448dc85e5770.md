---
title: "Node.js ã® ãƒ‡ãƒãƒƒã‚°æ–¹æ³•ã¨ live-edit ã§ã®ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜"
emoji: "ğŸ“"
type: "tech"
topics: Node.js node-inspector
published: true
---

# ãƒ‡ãƒãƒƒã‚°æ–¹æ³•
ãªã‚“ã ã‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã™ã‚‹ã‚ˆã‚Šç’°å¢ƒæ•´å‚™ã«ç›®ãŒè¡Œã£ã¦ã—ã¾ã†ã‚ãŸã—ã€ãã—ã¦æ¨ªé“ãã‚Œã¾ãã‚Šãªã®ã§ã™ã€‚ãŒã€æœ¬ã«ã‚‚æ²è¼‰ã•ã‚Œã¦ã„ã‚‹ Node.js ã® ãƒ‡ãƒãƒƒã‚°æ–¹æ³• ã§ã™ãŒæ°—ã«ãªã£ãŸç‚¹ãŒã‚ã£ãŸã®ã§ã€è‡ªåˆ†ãƒ¡ãƒ¢ãŒã¦ã‚‰ã«æ›¸ã„ã¦ãŠãã¾ã™ã€‚

[Node.jsã®é–‹ç™ºæ™‚ã«å¿…è¦ãªæƒ…å ±](http://qiita.com/mima_ita/items/1cc6b2fb938d5a1fc3aa#1-2)

## node-inspector ã«ã‚ˆã‚‹ãƒ‡ãƒãƒƒã‚°
Node.js ã® ä¸€èˆ¬çš„ãƒ‡ãƒãƒƒã‚°æ–¹æ³•ã¯ã€[node-inspector](https://github.com/node-inspector/node-inspector) ã§è¡Œã†ã‚‰ã—ã„ã®ã§ã¾ãšã‚¤ãƒ³ã‚¹ã‚³ã—ã¾ã™ï¼ˆç’°å¢ƒã«ã‚ˆã£ã¦ sudo ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™wï¼‰ã€‚

```
$ npm install -g node-inspector
```

å…¬å¼ã‚µã‚¤ãƒˆã¿ã‚‹ã¨ã‚µãƒ³ãƒ—ãƒ«ã® config file ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚ã‚‹ã®ã§åŒã˜ã‚ˆã†ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ï¼ˆå ´æ‰€ã¯ã€ç”¨é€”ã«ã‚ˆã£ã¦è‰²ã€…ãªå ´æ‰€ã«è¨­ç½®ã§ãã‚‹ã¿ãŸã„ï¼‰ã€‚

web-host ã¯ã€null æŒ‡å®šã ã¨ 127.0.0.1 ã«ãªã‚Šã¾ã™ãŒã€ã„ã¤ã‚‚ã®ã‚ˆã†ã«Vagrantç’°å¢ƒã§å‹•ã‹ã—ã¦ã„ã‚‹ã®ã§ ip ã‚’æŒ‡å®šã—ã¾ã™ã€‚

```text:~/.node-inspectorrc
{
  "web-port": 8088,
  "web-host": "192.168.11.212",
  "debug-port": 5858,
  "save-live-edit": true,
  "preload": false,
  "nodejs": ["--harmony"]
}
```

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ï¼’ã¤é–‹ã„ã¦

```
$ node --debug sample_api4.js
debugger listening on port 5858
```

```
$ node-inspector 
Node Inspector v0.9.2
Visit http://192.168.11.212:8088/debug?port=5858 to start debugging.
```

ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°ã€okã€‚

## Chromeã«ã‚ˆã‚‹ãƒ‡ãƒãƒƒã‚°
node-inspector ã¯ã€Chrome ã®Developerãƒ¢ãƒ¼ãƒ‰ã‚’çµŒç”±ã—ã¦ãƒ‡ãƒãƒƒã‚°ã‚’è¡Œã†ã®ã§ã€IE ã‚„ FireFox ã§ã¯ãƒ‡ãƒãƒƒã‚°ã§ããªã„ã‚ˆï½—ã€‚

![image](https://qiita-image-store.s3.amazonaws.com/0/44540/4829df55-fc2c-fe98-feff-0089a8746641.png)

## live-edit ä¸Šã®å¤‰æ›´ã¨ä¿å­˜
```"save-live-edit": true``` ã§å®šç¾©ã—ã¦ã„ã‚‹å ´åˆã¯ã€ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§å¤‰æ›´ãƒ»è¿½åŠ ã—ãŸå†…å®¹ãŒç›´æ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚false ã‚’æŒ‡å®šã—ãŸå ´åˆã«ã¯ã€Warnig ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ä»¥ä¸‹ã®å†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚åˆ©ä¾¿æ€§ã‚’è€ƒãˆã‚‹ã¨ true ã ã‘ã©ã€å®‰å…¨æ€§ã‚’æ±‚ã‚ã‚‹ãªã‚‰ false ãªã®ã‹ãªï¼Ÿ

```
Saving of live-edit changes back to source files is disabled by configuration.
Change the option "saveLiveEdit" in config.json to enable this feature.
```

# ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„ã£ã¦è¨€ã‚ã‚ŒãŸï½—
yum ã§ Node.js ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ v0.10.33(2015/04/22ç¾åœ¨) ãªã®ã§æœ€æ–°ç‰ˆã¨ãã‚‰ã¹ã‚‹ã¨ã¡ã‚‡ã£ã¨å¤ã„ã€‚ãªã®ã§ nvm ã‚’å°å…¥ã—ã¾ã™ã€‚
â€»ã¤ã„ã§ã« node-inspector ã‹ã‚‰ã‚‚ ```Update Node to 0.11.13 or newer to get full support.``` ã¨è¡¨ç¤ºã•ã‚Œã¦ã‚‹ã—ã­ã€‚

```
$ git clone git://github.com/creationix/nvm.git ~/.nvm
$ source ~/.nvm/nvm.sh
```

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ Node.js ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ç¢ºèª

```
$ nvm ls
$ nvm ls-remote
```

æœ€æ–°ã® Node.js ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦åˆ‡ã‚Šæ›¿ãˆã¦ã¿ã‚‹ã€‚

```
$ nvm install 0.12.2
######################################################################## 100.0%
Now using node v0.12.2 (npm v2.7.4)
$ nvm use 0.12.2
Now using node v0.12.2 (npm v2.7.4)
$ node -v
v0.12.2
```

.bashrc ã«ã€```source ~/.nvm/nvm.sh``` ã‚’è¿½åŠ ã—ã¾ã™ã€‚

ã‚ã¨ use ã‚³ãƒãƒ³ãƒ‰ã§åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ã‚‚ã€å†èµ·å‹•ã®åº¦ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ä¸­ã§æœ€æ–°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§åˆ©ç”¨ã•ã‚Œã‚‹ï¼Ÿã®ã§ã€ãã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’ã—ã¦ãŠãã¾ã™ã€‚
system ã®æ–‡å­—åˆ—ã¯ã€yum ã§ã„ã‚ŒãŸç‰ˆã«ãªã‚Šã¾ã™ã€‚

```
$ nvm alias default 0.12.2
default -> 0.12.2 (-> v0.12.2)
$ nvm alias default system
default -> system
```

æœ€æ–°ã«ã—ã¦ã€node-inspector ã‚’å†èµ·å‹•ã€‚ã€‚ã€‚ã“ã‚Œã§ä¸‹è¨˜ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã§ãªããªã‚Šã¾ã—ãŸã‚ˆã­ï½—ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ®‹ã£ã¦ã‚‹ã¨ãã‚‚ã‚ã‚‹ã®ã§F5ã­ï½—ï¼‰

```
Your Node version (undefined) has a partial support of profiler.
The stack frames tree doesn't show all stack frames due to low sampling rate.
The profiling data is incomplete and may show misleading results.
Update Node to 0.11.13 or newer to get full support.
```



