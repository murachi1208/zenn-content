---
title: "CentOS6.6 ç’°å¢ƒã® PHP 5.3.x ã« SQlite1.0.3 ã‚’å…¥ã‚ŒãŸã„ã¨ãã®ãƒ¡ãƒ¢"
emoji: "ğŸ“"
type: "tech"
topics: PHP SQlite1.0.3
published: true
---

# çµŒç·¯
ã¡ã‚‡ã£ã¨ã—ãŸphpã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œã‚‹ã“ã¨ã‚’ä»»ã•ã‚Œã¾ã—ãŸï½—ã€‚ä¼šå“¡ç®¡ç†ã¨ã‹ã»ã‚“ã¨ã«ã‚‚ã†basicèªè¨¼ãã‚‰ã„ãªæ„Ÿã˜ã®ç°¡å˜ãªã‚„ã¤ã‚’ã€‚ã¾ã‚ãã‚“ã ã£ãŸã‚‰ php + SQlite çµ„ã¿å…¥ã‚Œã¦ã¨æ€ã£ã¦ãŸã‚‰æœ¬ç•ªå…ˆã¯ãƒ¬ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒãƒ¼â€¦ã€‚ã¾ã‚ãã‚“ãªæ„Ÿã˜ã§å‡¹ã‚“ã§ã„ã¾ã—ãŸãŒã€é‹ã‚ˆã SQLiteãŒå…¥ã£ã¦ã„ã‚‹ã®ã§ãƒ©ãƒƒã‚­ãƒ¼ã¨æ€ã£ã¦ã„ãŸã‚‰ SQlite1.0.3 ã€‚
ã¡ã‚‡ã£ã¨ãƒ¼ãã‚“ãªå¤ã„ç’°å¢ƒã€ã€ãƒ­ãƒ¼ã‚«ãƒ«ã«ç’°å¢ƒä½œã‚Œã‚‹ã®ï¼Ÿã¨ã€ã¾ãŸã€Œã¯ã¾ã£ãŸã€ã®ã§ãã®ãƒ¡ãƒ¢ã€‚

ã¡ãªã¿ã«æ•£ã€…æ¢ã—ã¦ï¼ˆå‰ã«ãƒ¡ãƒ¢ã—ã¦ã„ãŸã®ã‚’ç„¡ãã—ãŸï¼‰ä¸‹è¨˜ã®ã‚µã‚¤ãƒˆã¨ãŠã‚Šã«è¡Œã£ãŸã‚‰ã„ã¾ãã„ã£ãŸã®ã§ã™ï¼ˆç¬‘ï¼‰ã€‚

> [PHP5.3ã«SQlite1.0.3ã‚’å…¥ã‚Œã‚‹](http://www.auraline.co.jp/tlab2/?p=20)

# æ‰‹é †
php ã¨ã‹ã‚‚å…¥ã‚Œã¾ã™ãœï½—

```
# yum install httpd-devel php php-mbstring php-pear php-devel php-pdo wget
# wget http://museum.php.net/php5/php-5.3.4.tar.gz
# tar xvfz php-5.3.4.tar.gz
# cd php-5.3.4/ext/sqlite
# phpize
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
config.m4:50: warning: AC_CACHE_VAL(pdo_inc_path, ...): suspicious cache-id, must contain _cv_ to be cached
../../lib/autoconf/general.m4:1974: AC_CACHE_VAL is expanded from...
../../lib/autoconf/general.m4:1994: AC_CACHE_CHECK is expanded from...
aclocal.m4:2743: PHP_CHECK_PDO_INCLUDES is expanded from...
config.m4:50: the top level
config.m4:50: warning: AC_CACHE_VAL(pdo_inc_path, ...): suspicious cache-id, must contain _cv_ to be cached
../../lib/autoconf/general.m4:1974: AC_CACHE_VAL is expanded from...
../../lib/autoconf/general.m4:1994: AC_CACHE_CHECK is expanded from...
aclocal.m4:2743: PHP_CHECK_PDO_INCLUDES is expanded from...
config.m4:50: the top level
# ./configure
# make clean;make
# make install
# sudo echo 'extension=sqlite.so' > /etc/php.d/sqlite.ini
# sudo echo '<?php phpinfo();' > /var/www/html/phpinfo.php
```

Apache ã‚’å†èµ·å‹•ã—ã¦ã€SQLite ãŒå®Ÿè¡Œå¯èƒ½ã‹ã‚’ç¢ºèªã™ã‚‹ã€‚

![sqlite3_php.png](https://qiita-image-store.s3.amazonaws.com/0/44540/390847dc-15d1-0a7a-66a1-aee4088a55f1.png)

ã‚ˆã—ã‚ˆã—ã€‚

> [SQLite é–¢æ•°ã€€ç›´æ¥æ“ä½œ](http://blue-red.ddo.jp/~ao/wiki/wiki.cgi?page=PHP+%26+SQLite)

ã•ã‚“ã®ã‚µã‚¤ãƒˆã®ã€ã‚³ãƒ¼ãƒ‰ãã®ã¾ã¾ã§ã™ãŒï¼ˆå¤šå°‘å¤‰æ›´ï¼‰ã€‚
é©å½“ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«è¨­ç½®ã—ã¦ã€‚å®Ÿè¡Œã—ã¾ã™ã€‚

```php
<?php    
$sqliteerror = null;
 
/* SQLiteãƒãƒ³ãƒ‰ãƒ«ã®å–å¾— */
$dbh = sqlite_open('test.db', '0666', $sqliteerror) 
   or die ("file not create.");
 
/* ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ */
/* idã‚’ãƒ—ãƒ©ã‚¤ãƒãƒªå®£è¨€ã—è‡ªå‹•ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ */
$query = <<<QUERY
DROP TABLE account_tbl;
);
QUERY;
$result = sqlite_query($query, $dbh);

$query = <<<QUERY
CREATE TABLE account_tbl (
    id INTEGER,
    number INTEGER,
    name VARCHAR(64) NOT NULL,
    email VARCHAR(128),
    PRIMARY KEY (id)
);
QUERY;
$result = sqlite_query($query, $dbh)
   or die ("table not create.");
 
/* ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã®ç”Ÿæˆ */
$query = "INSERT INTO account_tbl (number,name,email) VALUES ".
                "('30248','takahasi','takahasi@hoge.com') ";
$result = sqlite_query($query, $dbh);
 
$query = "INSERT INTO account_tbl (number,name,email) VALUES ".
                "('45567','ito','ito@hoge.com') ";
$result = sqlite_query($query, $dbh);
 
 
/* ãƒ‡ãƒ¼ã‚¿ã®å–å¾— */
$result = sqlite_query('SELECT * FROM account_tbl', $dbh);
 
$cols = array();
while ($cols = sqlite_fetch_array($result, SQLITE_ASSOC)) { 
    echo "----------------------<br>";
    echo "id    = {$cols['id']}" . "<br>";
    echo "number= {$cols['number']}" . "<br>";
    echo "name  = {$cols['name']}" . "<br>";
    echo "email = {$cols['email']}" . "<br>";
    echo "----------------------<br>";
} 
 
/* ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã®é–‹æ”¾ */
$result = null;
?>
```

çµæœã¨ã—ã¦

```
----------------------
id = 1
number= 30248
name = takahasi
email = takahasi@hoge.com
----------------------
----------------------
id = 2
number= 45567
name = ito
email = ito@hoge.com
----------------------
```

ã¨ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚Œã°ã€ok





