---
title: "CentOS6.8 ã« Crowi ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã€‚ãã—ã¦ã¯ã¾ã£ãŸï¼ˆè§£æ±ºæ¸ˆã¿ï¼‰ã€‚"
emoji: "ğŸ“"
type: "tech"
topics: CentOS6.8 Vagrant Crowi
published: true
---

# Markdownã§è¨˜è¿°ã§ãã‚‹Pukiwikiã¿ãŸã„ã®
æœ€è¿‘ã¯è‡ªåˆ†ã®wikiã‚‚æ›´æ–°ã™ã‚‹ã“ã¨ãŒå°‘ãªãã€ä¼šç¤¾ã§ã¯Gitã°ã‹ã‚Šä½¿ã£ã¦ã„ã¦ã™ã£ã‹ã‚Š Pukiwikiå½¢å¼ã‚’å¿˜ã‚Œã¦ã—ã¾ã£ãŸã®ã‚‚ã‚ã‚Šã€Markdownå½¢å¼ã§è¨˜è¿°ã§ãã‚‹Qiitaã‚¯ãƒ­ãƒ¼ãƒ³ã¿ãŸã„ã®ãŒãªã„ã‹ãªï¼Ÿã¨æ€ã£ã¦ã„ãŸã‚‰ [Crowi](http://site.crowi.wiki/) ãŒã„ã„ã‚‰ã„ã—ã‚ˆã€ã¨èã„ãŸã®ã§æ—©é€Ÿã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ãŸã€‚ãã—ã¦ãƒ»ãƒ»ãƒ»ï½—ã€‚

## Dockerä½¿ãˆã°æ—©ã„ã®ã«
[Crowiã‚’docker-nodeã§å‹•ã‹ã™ã¾ã§ã®ãƒ¡ãƒ¢](http://qiita.com/nooby/items/9b197c2b666d6b8371e1) ã•ã‚“ã®å†…å®¹ã§ç°¡å˜ã«è¡Œã‘ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ã¡ã‚‡ã£ã¨Dockerä½¿ãˆãªã„ç’°å¢ƒãªã®ã§ä»Šå›ã‚‚Vagrantã§ã‚„ã£ã¦ã¿ã¾ã™ã€‚
[Crowiã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹(CentOS 6.8)](http://qiita.com/oshuya/items/bd12cd40d4ba49c3f00b) ã•ã‚“ã®æ‰‹é †ãŒåŸºæœ¬ã§ã™ãŒå¾®å¦™ã«ã†ã¾ãã„ã‹ãªã‹ã£ãŸã®ã§ã€ä¿ºãƒ¡ãƒ¢é¢¨ã§æ‰‹é †ã¨ã—ã¦ã¾ã™ã€‚

# å‰æãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
Crowi å‹•ä½œã«ã¯ã€ä¸‹è¨˜ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ãŸã€‚

- Node.js (v7.9.0), nvm (0.33.1)
- MongoDB (2.6.12)
- crowi (1.5.3)

## Node.js
[ã€ä¿ºç”¨ãƒ¡ãƒ¢ã€‘ CentOS6ã«Node.jsã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹](http://qiita.com/ozawan/items/86ca7551d59005128892#nvm%E3%81%A7%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88) ã•ã‚“ã®å†…å®¹ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ãŸã€‚ãã—ã¦ npm ã‚‚å¿…è¦ãªã®ã§ä¸‹è¨˜ã®ã‚ˆã†ã«ã€‚

```bash:
$ nvm install v7.9.0
$ sudo yum install -y npm --enablerepo=epel
```

## MongoDB 
ã“ã‚Œã§ã„ã„ã®ã‹ãªï¼Ÿ

```bash:
$ sudo vim /etc/yum.repos.d/mongodb.repo
[mongodb]
name=MongoDB Repository
baseurl=http://downloads-distro.mongodb.org/repo/redhat/os/x86_64/
gpgcheck=0
enabled=1

$ sudo yum install mongodb-org
```

### Mongoã‚’ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã—ã¦crowiã®ãƒ¦ãƒ¼ã‚¶ã‚’ä½œæˆã™ã‚‹ã€‚
æ‰‹é †

```bash:
$ sudo /etc/init.d/mongod start
$ sudo chkconfig --add mongod 
```

```bash:
crowiç”¨ã®ãƒ¦ãƒ¼ã‚¶ã®ä½œæˆ
$ mongo
> use crowidb
switched to db crowidb
> db.createUser({user: "hoge", pwd: "hoge", roles: [{role: "userAdmin", db: "crowidb"}]})
Successfully added user: {
        "user" : "hoge",
        "roles" : [
                {
                        "role" : "userAdmin",
                        "db" : "crowidb"
                }
        ]
}
> use admin
switched to db admin
> db.system.users.find()
{ "_id" : "crowidb.hoge", "user" : "hoge", "db" : "crowidb", "credentials" : { "MONGODB-CR" : "fd084f378eb51ece0b3b3e886be89ea7" }, "roles" : [ { "role" : "userAdmin", "db" : "crowidb" } ] }
> exit
```

## crowiã®cloneã¨ã‹
ã‚ã¨ã¡ã‚‡ã£ã¨ã§ã™ã€‚Crowi ã¯ã€1.6.0 ä½¿ãŠã†ã¨æ€ã£ãŸã‘ã©ã†ã¾ãã„ã‹ã‚“ã‹ã£ãŸã€‚
ã¡ãªã¿ã« npm å®Ÿè¡Œã™ã‚‹ã¨çµæ§‹æ™‚é–“ã‹ã‹ã‚Šã¾ã™ã€‚

```bash:
$ sudo yum install krb5-devel gcc-c++
$ git clone --depth 1 https://github.com/crowi/crowi.git
$ cd crowi
$ git checkout v1.5.6
$ sudo npm install --unsafe-perm
```

ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹

```bash:crowi.sh
export PASSWORD_SEED=hoge
export MONGO_URI=mongodb://hoge:hoge@localhost/crowidb
node app.js
```

å®Ÿè¡Œã—ã¦ã¿ã‚‹ã€‚

```bash:
$ chmod +x crowi.sh
$ ./crowi.sh
[development] Express server listening on port 3000
```

3000ãƒãƒ¼ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã‚‹ã€‚ã†ã¾ãã„ã£ã¦ã‚‹ã¨æ€ã‚ã‚Œã‚‹ï½—
![ç„¡é¡Œ.png](https://qiita-image-store.s3.amazonaws.com/0/44540/81f6a145-3697-82f6-aed8-1242c670305c.png)

## æ¤œç´¢æ©Ÿèƒ½ã‚‚ã¤ã‘ã¦ã¿ã‚‹
ã“ã¡ã‚‰ã¯ã€ã™ã‚“ãªã‚Šã†ã¾ãã„ã£ãŸã§ã™ï½—ã€‚
> [Crowiã§æ¤œç´¢ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹(CentOS 6.8)](http://qiita.com/oshuya/items/05883de5cc275d87a7b8)

![image.png](https://qiita-image-store.s3.amazonaws.com/0/44540/13a52de0-0899-03c0-17dc-b3ffcd51b41e.png)


