---
title: "Slim 3 Framework ã„ã¾ã•ã‚‰Vagrantç’°å¢ƒã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦"
emoji: "ğŸ“"
type: "tech"
topics: Slim3 Vagrant
published: true
---

# ã•ãã£ã¨ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ã†ã¨ãslimãŒã„ã„ã‚‰ã—ã„
php ã§ã¨ã‚Šã‚ãˆãšã•ãã£ã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œã‚ŠãŸã„ãŒã‚¹ã‚¯ãƒ©ãƒƒãƒã ã¨ãªãƒ¼ã€ã§ã‚‚è»½é‡ãª[ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãªã‚“ã‹ãªã„ã‹ï½ãª](http://eng-entrance.com/php_framework)ã¨æ¢ã—ã¦ã„ãŸã‚‰[slim](http://www.slimframework.com/)ãŒã„ã„ã‚ˆã£ã¦ã„ã†ã®ã‚’èã„ãŸã®ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ãŸã€‚

> [Slim 3 Frameworkãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã®ã§ã€ã–ã£ã¨ç´¹ä»‹](http://qiita.com/asaokamei/items/f915a625cb4d3f9b38de)

## php ã¯ã€5.5ä»¥ä¸Šã‚’ä½¿ã†ã¨ã®ã“ã¨
php 5.3ã§ã„ã„ã‚„ã¨æ€ã£ã¦ã„ãŸã‚‰[ã‚µãƒãƒ¼ãƒˆæœŸé–“åˆ‡ã‚Œã¦](https://www.wikiwand.com/en/PHP#/Release_history)ã„ã‚‹ã®ã­çŸ¥ã‚‰ãªã‹ã£ãŸã€‚ã„ã¾ã©ãã ã¨ 5.6 or 7.0 ãŒã„ã„ã¿ãŸã„ã§ã™ãªã€‚

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
php 7.0 ã‚’[æ‰‹é †ã«å¾“ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](http://qiita.com/ozawan/items/caf6e7ddec7c6b31f01e)ã—ã¦ã¿ã‚‹ã€‚MySQLã®ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„ã®ã§pdoã‚‚ã„ã‚Œã¦ã¿ã‚‹ï¼ˆã‚‚ã—ã‹ã—ãŸã‚‰ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã‹ã‚‚ã—ã‚Œãªã„ã‘ã©â€¦ï¼‰ã€‚Apache2 ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã€‚

```text
# yum install epel-release
# rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-6.rpm
# yum install --enablerepo=remi,remi-php70 php php-devel php-mbstring php-pdo php-gd php-mysqlnd unzip
```

composer ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```text
# curl -s https://getcomposer.org/installer | php
# mv composer.phar /usr/local/bin/composer
```

# æ—©é€Ÿ slim ã‚’ã‚¤ãƒ³ã‚¹ã‚³
æœ¬å®¶ã® [User Guide Installation](http://www.slimframework.com/docs/start/installation.html) æ‰‹é †ã«å¾“ã£ã¦ã‚„ã£ã¦ã¿ã‚‹ã€‚

```text
$ mkdir slim; cd slim
$ composer require slim/slim "^3.0"

./composer.json has been created
Loading composer repositories with package information
Updating dependencies (including require-dev)
  - Installing container-interop/container-interop (1.1.0)
    Downloading: 100%         

  - Installing nikic/fast-route (v1.0.1)
    Downloading: 100%         

  - Installing psr/http-message (1.0.1)
    Downloading: 100%         

  - Installing pimple/pimple (v3.0.2)
    Downloading: 100%         

  - Installing slim/slim (3.5.0)
    Downloading: 100%         

Writing lock file
Generating autoload files
```

## ã¨ã‚Šã‚ãˆãšslimå‹•ä½œç¢ºèª

```
$ cp ./vendor/slim/slim/example/index.php .
$ php -S localhost:8000 -t .
```

ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦å‹•ä½œç¢ºèªã™ã‚‹ã€‚

```
$ curl http://localhost:8000
$ curl http://localhost:8000/hello
$ curl http://localhost:8000/hello/hage
```
# Web ServiceåŒ–
æœ¬å®¶ã® [User Guide Web Service](http://www.slimframework.com/docs/start/web-servers.html#apache-configuration) æ‰‹é †ã«å¾“ã£ã¦ã‚„ã£ã¦ã¿ã‚‹ã€‚apache ã®ãƒãƒ¼ãƒãƒ£ãƒ«ãƒ›ã‚¹ãƒˆè¨­å®šå…±ã«ã‚„ã£ã¦ã¿ã‚‹ã€‚

ã¾ãšslimã®ç§»å‹•

```
# mv /home/vagrant/slim /var/www
# mkdir -p /var/www/slim/public
# cp -p /var/www/slim/vendor/slim/slim/example/index.php /var/www/slim/public/
```

apache ã®ãƒãƒ¼ãƒãƒ£ãƒ«ãƒ›ã‚¹ãƒˆè¨­å®š ```slim3.conf``` ã¤ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã§ä½œã£ã¦ã¿ãŸã‚Šã™ã‚‹ã€‚

```text
Listen 8080
NameVirtualHost *:8080
<VirtualHost *:8080>
  ServerName slim3
  DocumentRoot /var/www/slim/public
  ErrorLog /var/log/httpd/slim.error.log
  CustomLog /var/log/httpd/slim.access.log combined
  LogLevel warn
  <Directory /var/www/slim/public>
    AllowOverride All
  </Directory>
</VirtualHost>
```

.htaccess ã‚‚è¨­å®šã™ã‚‹ã£ã¦ã“ã¨ã§ã€‚ã“ã¡ã‚‰ã¯ ./vendor/slim/slim/example/.htaccess ã‚’å‚è€ƒã«ã™ã‚‹ã¨ã‚ˆã„ã‹ã‚‚ã€‚

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.php [QSA,L]
```

apache ã‚’å†èµ·å‹•ã—ã¦ç¢ºèªã€‚

çµ‚ã‚ã‚Šã€ã“ã‚Œã ã‘ã§ä½¿ãˆã‚‹ã®ã‹ãƒ¼ã€‚ã—ã‹ã‚‚slimã®ã‚µã‚¤ãƒˆã‚·ãƒ³ãƒ—ãƒ«ã§ã„ã„ã‚ã€‚

æ¬¡å›ã€MySQLã‚¢ã‚¯ã‚»ã‚¹ã—ãŸãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºã¨ã‹ã‚„ã£ã¦ã¿ã‚‹ã€‚



