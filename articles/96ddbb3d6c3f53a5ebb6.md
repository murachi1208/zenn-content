---
title: "MariaDB ã§ã‚¯ãƒ©ã‚¹ã‚¿åŒ–ã—ã¦ã¿ã‚‹ï¼ˆMariaDB 10.0 Galera Cluster, CentOS 6.5ï¼‰ã®ã‚’èª¿æŸ»ã—ãŸçµæœã®ãƒ¡ãƒ¢ãƒ¡ãƒ¢"
emoji: "ğŸ“"
type: "tech"
topics: mariadb Galera
published: true
---

# MySQLã‚¯ãƒ©ã‚¹ã‚¿åŒ–
Oracle RAC ãªã©ã‚’ä¼šç¤¾ã§ä½¿ã£ã¦ã„ãŸï¼ˆä¸»ã«ä½¿ã†ã‚¬ãƒ¯ï¼‰ã®ã§ã™ãŒã€è‡ªåˆ†ã§ã‚‚è¨­å®šã—ã¦ã¿ãŸã„ãªã¨æ€ã£ã¦ã„ãŸã‚‰[MariaDB Galera Cluster](https://mariadb.com/kb/en/mariadb/yum/)ãŒã€æ¯”è¼ƒçš„è¨­å®šãŒç°¡å˜ã ã¨èã„ãŸã®ã§ãã®ã¨ãã«èª¿æŸ»ã—ãŸãƒ¡ãƒ¢ã€‚

# å…ˆäººé”ã®è¨˜äº‹ã¨ãŠã‚Šãªã‚“ã ã‘ã©ã­
HAæ§‹æˆã¡ã‚ƒã‚“ã¨è€ƒãˆã‚‹ãªã‚‰ LVS + Keepalived ä½¿ã†ã®ãŒã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ã£ã½ã„ã§ã™ã‘ã©ã€ã¨ã‚Šã‚ãˆãšã©ã‚“ãªå‹•ä½œã‚’ã™ã‚‹ã‹ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚ã“ã“ã‚‰ã¸ã‚“ã¯ã€Oracle RACã«æ¯”ã¹ã¦æ•·å±…ãŒä½ãã¦ã„ã„ã‚ã€‚ãŒã€æ¥­å‹™ã§ä½¿ã†ãªã‚‰ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ã‹ãƒªã‚¹ãƒˆã‚¢ã¨ã‹ã€ã‚¯ã‚¨ãƒªãƒ¼ãƒ­ã‚°ã¨ã‚‹ã¨ã‹ã€ã€è‰²ã€…è€ƒãˆãªã„ã¨ã„ã‘ã¾ã›ã‚“ã‘ã©ã€ã¾ã‚å‹‰å¼·ã§ã™ã‹ã‚‰ã€‚

> [MariaDB Galera Clusterã‚’è©¦ã™](http://research.sakura.ad.jp/2013/02/14/mariadb-galera-cluster-1/comment-page-1/)
> [MariaDB 10.0 Galera Clusterã‚’CentOS7ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](http://qiita.com/tukiyo3/items/0971f89b5ad3024f5680#%E6%B3%A8%E6%84%8F%E7%82%B9)

# MariaDB 10.0 Server
MariaDB 5.5 ã¨ 10.0 ãŒã‚ã‚Šã¾ã™ãŒã€å…ˆäººé”ã®è¨˜äº‹ã¨ãŠã‚Š 10.0 ã‚’å…¥ã‚Œã¦ã¿ã¾ã™ã‚ˆã€‚æ‰‹é †ã¨ãŠã‚Šå®Ÿæ–½ã™ã‚‹ã®ã‚‚å‹‰å¼·ã§ã™ã‹ã‚‰ã€‚ãã—ã¦ã•ã£ãã‚Šå‹•ãã¾ã™ã€‚

## æ³¨æ„ç‚¹ãŒã‚ã‚‹
ãƒ»Galera Clusterã¯æœ€ä½3å°ä»¥ä¸Šã§ã®æ§‹æˆã«ã™ã‚‹ã“ã¨ã€‚
ã€€ã€€â‡’ã€€æ¨å¥¨ã‚‰ã—ã„ã§ã™ã€‚
ãƒ»ã‚¯ã‚¨ãƒªãƒ¼ãŒå®Ÿè¡Œã•ã‚ŒãŸDBã‚µãƒ¼ãƒã®ã¿binlogãŒè¨˜éŒ²ã•ã‚Œã‚‹ã€‚
ã€€ã€€â‡’ã€€ãƒã‚¤ãƒŠãƒªãƒ­ã‚°ã‹ã‚‰ã€ãƒªã‚¹ãƒˆã‚¢ãƒ»ãƒªã‚«ãƒãƒªã™ã‚‹å ´åˆã¯æ³¨æ„ãŒå¿…è¦ã€‚
ãƒ»Primaryã‚­ãƒ¼ãŒãªã„ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ã€insert ã®ã¿ä½¿ç”¨å¯èƒ½ã€‚update, delete ã¯ä½¿ãˆãªã„ã€‚
ã€€ã€€â‡’ã€€æ¤œè¨¼ã—ãŸã‚‰ã€ãã®ã¨ãŠã‚Šã§ã—ãŸã€‚æ¥­å‹™ã§ã¯ã€Primaryã‚­ãƒ¼ã‚’ä½œæˆã—ãªã„ãƒ†ãƒ¼ãƒ–ãƒ«ä½œã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹å ´é¢ãŒæµ®ã‹ã³ã¾ã›ã‚“ãŒâ€¦ç‰¹ã«å•é¡Œãªã„ã‹ã¨ï¼ˆç¬‘ï¼‰

# ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã¹ãç‚¹
MySQLã‚¯ãƒ©ã‚¹ã‚¿åŒ–ã¯é©šãã»ã©ç°¡å˜ã«ã§ãã¾ã—ãŸã€‚3å°â‡’2å°ã‚’æ­¢ã‚ã¦1å°ã«ã—ã¦ã€2å°å¾©æ—§â‡’3å°ã€ãªã©ã—ã¦ã‚‚å½“ç„¶ã§ã™ãŒã‚¯ãƒ©ã‚¹ã‚¿åŒ–ã§ãã¦ã„ã‚‹ã‚ã‘ã§ã™ã€‚
ã‚ã¨ã¯ã€HAæ§‹æˆã‚„é‹ç”¨å‘¨ã‚Šã§ã™ã­ã€‚ã“ã‚Œã°ã‹ã‚Šã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãŒãªã„ã®ã§è€ƒãˆãªã„ã¨ã„ã‘ã¾ã›ã‚“ã­ã€‚

ã¨ã‚Šã‚ãˆãšã€ãã®å‰ã«MariaDBã®è¨­å®š

> [MySQL 5.6ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã«ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã¹ãé …ç›®](http://yakst.com/ja/posts/61)
> [MariaDBã®åˆæœŸè¨­å®š](http://www.seirios.org/seirios/dokuwiki/doku.php?id=serverapp:database:mariadb:initial-config)
> [keepalivedã§ä»®æƒ³IPã‚’ä½“é¨“](http://qiita.com/tukiyo3/items/dc355dd456c0973b5a39)


# ã‚¯ã‚¨ãƒªãƒ¼ãƒ­ã‚°ãŒã§ãªã„
```general-log=1``` ã‚¯ãƒ©ã‚¹ã‚¿åŒ–ã«ä¼´ã†ä»•æ§˜ãªã®ã‹ã§ãªã„ã®ã§ã€audit pluginã§ã‚¯ã‚¨ãƒªãƒ¼ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹ã€‚
ã‚ˆãã‚ˆãè€ƒãˆã‚‹ã¨ãƒã‚¤ãƒŠãƒªãƒ¼ãƒ­ã‚°ã‚‚å‡ºåŠ›ã—ã¦ã„ã‚‹ã®ã§ãã“ã‹ã‚‰å–å¾—ã™ã‚‹ã¨ã„ã†ã“ã¨ã§ã‚‚ã„ã„ã‹ã‚‚ã—ã‚Œãªã„ãŒã€ã“ã® audit ã¤ã‹ã†ã¨ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§on/offåˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã®ã§ã„ã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚
ãŸã ã—ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½¿ã£ã¦ã‚‚ã€ã‚¯ã‚¨ãƒªãƒ¼ãŒå®Ÿè¡Œã•ã‚ŒãŸDBã‚µãƒ¼ãƒã®ã¿è¨˜éŒ²ã•ã‚Œã‚‹ã®ã¯å½“ç„¶ã®ã“ã¨ã§ã™ï½—

> [MariaDBã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ç›£æŸ»ã—ã¦ã€ã‚¯ã‚¨ãƒªãƒ¼ã‚’è¿½è·¡ã™ã‚‹ï¼](http://qiita.com/hit/items/0c401767822185500cad)





