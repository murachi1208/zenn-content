---
title: "Slim 3 Framework ã§ãƒ­ã‚°å‡ºåŠ›ã—ãŸã‚ŠQueryãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã²ã‚ã£ãŸã‚Šã€‚ãã®ï¼“"
emoji: "ğŸ“"
type: "tech"
topics: Slim3 Vagrant
published: true
---

# ãã®ï¼’ã§
Slim-Skeleton ã‚’å°å…¥ã—ã¦ã‹ã‚‰è‚‰ä»˜ã‘ãŒæ¥½ã—ã„ä»Šæ—¥ã“ã®ã”ã‚ã€‚å›ã‚Šé“ãŒå¤šã‹ã£ãŸã‘ã©ãªã‚“ã¨ãªãç†è§£ã§ãã¦ããŸã‚“ã§ã€‚ãã‚ãã‚æœ¬æ ¼çš„ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã—ã¦ã¿ã‚ˆã†ã‹ãªã¨ï½—ã€‚

# ãƒ­ã‚°å‡ºåŠ›ã« monolog ãŒä½¿ãˆã‚‹
Slim-Skeleton ã‚’å°å…¥ã™ã‚‹ã¨ [monolog](https://github.com/Seldaek/monolog) ãŒä½¿ãˆã‚‹ã®ã§æ¥½ã¡ã‚“ã€‚`src/settings.php` ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ç°¡å˜ã«ä½¿ãˆã‚‹ã€‚

```php:src/settings.php
  'logger' => [
    'name' => 'slim-app',
    'path' => __DIR__ . '/../logs/app.log',
    'level' => \Monolog\Logger::DEBUG,
  ],
```

ä½¿ã„æ–¹ã¯ä¸‹è¨˜ã¿ãŸã„ã«ä½¿ãˆã°okã€‚è©³ã—ãã¯ã‚½ãƒ¼ã‚¹ã¿ã¦ã‚‚ã„ã„ã‹ã‚‚ã€‚`vendor/monolog/monolog/src/Monolog/Logger.php`

```php
$this->logger->addDebug('log');
$this->logger->addInfo('log');
$this->logger->addWarning('log');
```

# Queryãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—
slimã«ã¯ã€method ã¨ã—ã¦ GET, PUT ã‚„ã‚‰æ™®é€šã«httpã®methodãŒã‚ã‚‹ã‚ã‘ã§ã™ãŒã€ã¡ã‚‡ã£ã¨é¢ç™½ã„ã®ãŒ map ã¤ãƒ¼ã‚„ã¤ã€‚ã“ã„ã¤è¤‡æ•°ã®methodã‚’ä¸€ã¤ã§ã†ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹å„ªã‚Œã‚‚ã®ã§ã€ã¾ã‚ã—ãªã„ã ã‚ã†ã‘ã© GET/POSTä¸¡æ–¹ãŠãªã˜uriã§å—ã‘ã‚‹ã¨ãã«ä¾¿åˆ©ã«ä½¿ãˆãã†ã€‚

```php
$app->map(['GET', 'POST'], '/books', function (Request $request, $response, $args) {
```

ã¨ã‚Šã‚ãˆãšã“ã‚“ãªæ„Ÿã˜ã§ä½¿ã£ã¦ã¿ã‚‹ã€‚

```php
$app->map(['GET', 'POST'], '/test_param', function ($request, $response, $args) {
  $method = $request->getMethod();
  $uri = $request->getUri();

  // get/post
  if ($request->isGet() == 1) {
    echo "<br> isGet!! <br>";
    $allGetVars = $request->getQueryParams();
    foreach($allGetVars as $key => $param){
      //GET parameters list
      echo $param . "<br>";
    }
    //Single GET parameter
    $getParam = $allGetVars['name'];
    echo "<br> get name : " . $getParam . "<br>";
  } else {
    echo "<br> isPost!! <br>";
    $allPostPutVars = $request->getParsedBody();
    foreach($allPostPutVars as $key => $param){
      //POST or PUT parameters list
      echo $param . "<br>";
    }
    //Single POST/PUT parameter
    $getParam = $allPostPutVars['name'];
    echo "<br> post name : " . $getParam . "<br>";
  }
}
```

`getMethod()` `getUri()` ã¯ã€[Slim Request](http://www.slimframework.com/docs/objects/request.html#the-request-uri) ã‚’å‚ç…§ã™ã‚‹ã¨ã‚ˆã„ã€‚

ã§ã€ç°¡å˜ãªãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½œã£ã¦è©¦ã—ã¦ã¿ã‚‹ã€‚

```html
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>sample</title>
 </head>
<body>
 <form action="http://ãƒ›ã‚¹ãƒˆip:8080/test_param" method="post">
  åå‰ï¼š<br />
  <input type="text" name="name" size="30" value="" /><br />
  ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼š<br />
  <input type="text" name="mail" size="30" value="" /><br />
  ã‚³ãƒ¡ãƒ³ãƒˆï¼š<br />
  <textarea name="comment" cols="30" rows="5"></textarea><br />
  <br />
  <input type="submit" value="ç™»éŒ²ã™ã‚‹" />
 </form>
</body>
</html>
```

[get/post](http://stackoverflow.com/questions/32668186/slim-3-how-to-get-all-get-put-post-variables)ä¸¡æ–¹ã«å¯¾å¿œã§ãã‚‹ã‚„ã‚“ã€‚ç°¡å˜ã™ãªï½—

ã“ã‚Œã§ç°¡å˜ãªã‚¢ãƒ—ãƒªã¤ãã‚Œããƒ¼ã ï½—
æ¬¡ã¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å—ã‘å–ã£ã¦è‰²ã€…ãªQueryã‚’æ›¸ã„ã¦ã¿ã‚‹ã€‚







