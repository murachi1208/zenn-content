---
title: "fluentd ã® timezone ãƒã‚°ã«ã¯ã¾ã£ãŸ(v0.10.45)"
emoji: "ğŸ“"
type: "tech"
topics: Fluentd CentOS6.5
published: true
---

# fluentd ã®ãƒã‚°ã«ã¯ã¾ã£ãŸ
fluentd æœ€æ–°ç‰ˆ [2014/06/19: version v1.1.20](http://docs.treasuredata.com/articles/td-agent-changelog#20140619-version-v1120) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆè‡ªå‹•ã ã¨ï¼‰ã™ã‚‹ã¨ã€fluentd v0.10.50 ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã®ã ã‘ã©ã€ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯ timezone ãŒã†ã¾ãå‡¦ç†ã•ã‚Œãªã„ãƒã‚°ãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚

å…·ä½“çš„ã«ã¯ã€timezone ã®å‡¦ç†ãŒãƒã‚°ã£ã¦ã„ã‚‹ãŸã‚ ```type file``` ã§å‡ºåŠ›ã™ã‚‹ã¨ä¸‹è¨˜ã®æ§˜ã«ãªã‚‹ã€‚JST(+0900) ä»¥å¤–ã‚‚åŒæ§˜ã®ç¾è±¡ãŒã§ã¦ã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ãªï¼Ÿ

```lang:bug
2014-06-25T18:02:17Z    apache.access   {"host":"192.168.11.1","user":null,ãƒ»ãƒ»ãƒ»
```

æœ¬æ¥ã¯

```lang:ok
2014-06-26T03:02:17+09:00    apache.access   {"host":"192.168.11.1","user":null,ãƒ»ãƒ»ãƒ»
```

## å›é¿æ–¹æ³•
fluentd v0.10.45 ã§ã¯ã€æœ¬ç¾è±¡ãŒã§ã¦ã„ãªã„ã®ã§æŒ‡å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ yum ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ï¼‰ã™ã‚‹ã€‚
32/64bit ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åãŒç•°ãªã‚‹ã®ã§ã€ãã“ã‚‰ã¸ã‚“ã¯é©å®œ http://packages.treasure-data.com/redhat/ ã§èª¿ã¹ã‚‹ã“ã¨ã€‚

```lang:command
$ sudo yum remove td-agent-1.1.20-0.x86_64
$ sudo yum install td-agent-1.1.19-0.x86_64
$ td-agent --version
td-agent 0.10.45
```

# yum ã§è‡ªå‹•æ›´æ–°ã—ã¦ã„ã‚‹å ´åˆ
yum ã® fastestmirror ã‚’å°å…¥ã—ã¦ã„ã‚‹ã¨æŠ˜è§’ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ãŸã®ãŒæœ€æ–°åŒ–ã•ã‚Œã¦ã—ã¾ã†ã®ã§ ```/etc/yum.conf``` ã«ä»¥ä¸‹ã‚’è¿½åŠ ã™ã‚‹ã€‚

```
exclude=td-*
```

> [yum ã«ã‚ˆã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†](http://linux.kororo.jp/cont/intro/yum.php)

# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ»ãƒ»ãƒ»ãŒ
åˆå¿ƒè€…ã£ã½ã„åˆæœŸã®è¨­å®šã§æ‚©ã‚“ã§ã„ã¾ã—ãŸã€‚ã“ã®æ™‚æœŸã« fluentd ã‚’å°å…¥ã™ã‚‹ãï¼ã£ã¦äººãƒ»ãƒ»ãƒ»ç§ã‚‚å«ã‚ã¤ã¾ãšãã‚ˆãªï½ã€‚ã¨ç§ã‚‚ã€ï¼’æ—¥æ‚©ã‚“ã ï½—

ãŠç´„æŸã®ãƒ†ãƒ³ãƒ—ãƒ¬ã€æŒ‡å®šãŒé–“é•ã£ã¦ã„ãªã„ã®ã«ãƒ»ãƒ»ãƒ»å‡ºåŠ›çµæœãŒé•ã†ã‚ˆï¼ï¼ã¦ã€ãã‚Šã‚ƒæ‚©ã‚€ã‚ˆã­ã€‚

```/etc/td-agent/td-agent.conf
<source>
  type tail
  path /var/log/httpd/access_log
  tag apache.access
  pos_file /var/log/td-agent/httpd-access.log.pos
  format apache2
</source>

<match apache.access>
  type copy

  <store>
    type stdout
  </store>

  <store>
    type file
    path /tmp/aaaaa
    time_slice_format %Y%m%d_%H%M
    time_slice_wait 1m
  </store>
</match>
```

