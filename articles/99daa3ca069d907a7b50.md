---
title: "Vagrant ã®ç’°å¢ƒã‚’è¤‡è£½ã™ã‚‹"
emoji: "ğŸ“"
type: "tech"
topics: Vagrant Windows8
published: true
---

# Vagrant ã®ç’°å¢ƒã‚’è¤‡è£½ã™ã‚‹
ãã®ã¾ã‚“ã¾ãªã‚“ã§ã™ã‘ã©ã€‚Vagrant ã® box ã¨ã—ã¦ç”¨æ„ã•ã‚Œã¦ã„ã‚‹OSã¯ã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ãŒ UTC ã«ãªã£ã¦ã„ã‚‹ã®ã§ JST ã«å¤‰æ›´ã—ãŸã‚Šãƒ¦ãƒ¼ã‚¶ã‚’è¿½åŠ ã—ãŸã‚Šãƒ»ãƒ»ãƒ»ã¨ VM ã‚’ä½œæˆã™ã‚‹æ¯ã«è¨­å®šã™ã‚‹ã®ãŒé¢å€’ãªå ´åˆã¯è¤‡è£½ã—ã¦ã—ã¾ã†ã®ãŒç°¡å˜ã€‚ãã‚“ãªãƒ¡ãƒ¢ã€‚
ã¡ãªã¿ã«ã„ã„æ„Ÿã˜ã«ä½œã£ãŸ vm ã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã—ã¦ã‚‚ã„ã„ã—ãã“ã‚‰ã¸ã‚“ã¯è‡ªç”±åº¦ãŒé«˜ã„ã¨æ€ã„ã¾ã™ãŒã€å®Œå…¨ã«è‡ªå‹•åŒ–ï¼†æœ€æ–°åŒ–ã—ãŸã„ã¨è€ƒãˆã¦ã„ã‚‹ãªã‚‰ [Chef Solo](http://www.amazon.co.jp/%E5%85%A5%E9%96%80Chef-Solo-Infrastructure-as-Code-ebook/dp/B00BSPH158) ã‚’ä½¿ã†æ‰‹ã‚‚ã‚ã‚Šã¾ã™ã€‚

## æ‰‹é †ã¯ã€ä»¥ä¸‹ã®ã¨ãŠã‚Š
1. è¤‡è£½ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ `Vagrantfile` ãŒã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•ã™ã‚‹ã€‚
2. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã‚³ãƒãƒ³ãƒ‰ ```vagrant package``` ã¾ãŸã¯ ```vagrant package [vm name] --output [output.box]``` ã‚’å®Ÿè¡Œã™ã‚‹ã€‚
3. ä½œæˆã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ  ```vagrant box add``` ã™ã‚‹ã€‚
3. ```box_url``` ã§ä¸Šè¨˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æŒ‡å®šã™ã‚‹ã€‚

## å…·ä½“çš„ãªæ‰‹é †
ã¾ãšãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ OS ã‚’ Vagrant ã® box ã‹ã‚‰ãƒãƒ§ã‚¤ã‚¹ã—ãã“ã«è‡ªåˆ†ãªã‚Šã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸç‰©ã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ï¼ˆboxåŒ–ï¼‰â†’boxã‚’ä½¿ç”¨ã™ã‚‹ã¨ã„ã†æµã‚Œã€‚

### ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ vm ã®ä½œæˆã¨ç’°å¢ƒè¨­å®š
[Chocolatey + VirtualBox + Vagrant ã®ç°¡å˜ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— ï¼ˆWindowsï¼‰](http://qiita.com/murachi1208/items/5b429cb7cedf76164e67)ã‚’å‚è€ƒã«ã—ãªãŒã‚‰ ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ vm ã‚’ä½œæˆã—ã¾ã™ã€‚ä½œæˆãŒçµ‚äº†ã—ãŸã‚‰ ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’ JST ã«å¤‰æ›´ã—ãŸã‚Šãƒ¦ãƒ¼ã‚¶ã‚’è¿½åŠ ã—ãŸã‚Š ```yum -y update``` ã—ãŸã‚Šç’°å¢ƒè¨­å®šã‚’è¡Œã„ã¾ã™ã€‚

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œ
```vagrant package``` ã‚³ãƒãƒ³ãƒ‰ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‡ºåŠ›ã—ã¾ã™ã€‚
ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ vm ã®åå‰ã‚’ **centos65base** ã¨ã—ã¦è©±ã‚’é€²ã‚ã¾ã™ã€‚


```lang:command
c:\> vagrant package centos65base --output centos65base.box
==> redm: Clearing any previously set forwarded ports...
==> redm: Exporting VM...
```

ã¡ãªã¿ã«è¤‡æ•°ã®vmã‚’ç«‹ã¡ä¸Šã’ã¦ã‚‹å ´åˆã¯ã€```This command requires a specific VM name to target in a multi-VM environment.``` ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã§baseã‚’æŒ‡å®šã™ã‚‹ã€‚

```lang:command
c:\> vagrant package basecentos66 centos66base --output centos66base.box
==> redm: Clearing any previously set forwarded ports...
==> redm: Exporting VM...
```


### box ã®ç™»éŒ²

```lang:command
c:\> vagrant box add centos65base c:\<boxã®å ´æ‰€>\centos65base.box
c:\> vagrant box list
cantos65base (virtualbox, 0)
```

### box ã‚’ä½¿ç”¨ã™ã‚‹
ã“ã“ã‹ã‚‰ã¯é€šå¸¸ã¨ãŠã‚Šã€‚

```lang:command
c:\> vagrant init centos65base
```

ã¾ãŸã¯ ```config.vm.box = "centos65base"```ã¨æŒ‡å®šã™ã‚‹ã ã‘ã€‚

### ãƒ›ã‚¹ãƒˆåã« "_" ã‚’ä½¿ç”¨ã™ã‚‹ã¨ãƒ»ãƒ»ãƒ»
vm ã®ãƒ›ã‚¹ãƒˆåã‚’ã€Œcentos6_5_baseã€ã¨æŒ‡å®šã—ãŸã‚‰ ```vagrant up``` ã§æ€’ã‚‰ã‚Œã¾ã—ãŸã€‚ :tired_face: æ³¨æ„ã•ã‚Œã¾ã™ã­ï½—

```lang:error
Bringing machine 'default' up with 'virtualbox' provider...
There are errors in the configuration of this machine. Please fix
the following errors and try again:

vm:
* The hostname set for the VM should only contain letters, numbers,
hyphens or dots. It cannot start with a hyphen or dot.
```


