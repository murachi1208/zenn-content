---
title: "jq ã§substrã¿ãŸã„ã«æ–‡å­—åˆ—ã‚’å–å¾—ã™ã‚‹"
emoji: "ðŸ“"
type: "tech"
topics: Linuxã‚³ãƒžãƒ³ãƒ‰ jq
published: true
---

# jq
jq ä¾¿åˆ©ã§ã™ã­ã€‚ã£ã¦ã‚‚ã†æž¯ã‚ŒãŸè©±é¡Œã§ã™ãŒã€ã„ã¾ã•ã‚‰ã§ã™ã€‚
ã§ã‚‚ã¡ã‚‡ã£ã¨ã‚„ã‚ŠãŸã‹ã£ãŸã“ã¨ã§ãƒãƒžã£ãŸã®ã§ãã®ãƒ¡ãƒ¢ã€‚

# substrã¿ãŸã„ã«æ–‡å­—åˆ—ã‚’å–å¾—ã—ãŸã‹ã£ãŸ
ãƒžãƒ‹ãƒ¥ã‚¢ãƒ«å«ã£ã¦ã“ã¨ã§ã€ï¼“ï¼åˆ†ä½æ ¼é—˜ã—ã¾ã—ãŸï½—ã€‚ãã—ã¦ã‚„ã‚ŠãŸã„ã“ã¨ãŒç°¡å˜ã«ã§ãã‚‹ã“ã¨ã‚’å†ç¢ºèªã—ã¾ã—ãŸã€‚

## ã“ã‚“ãªã“ã¨
å…·ä½“çš„ã«ã¯ã€ä¸‹è¨˜ã®jsonã®æ—¥ä»˜(dateTime)æ–‡å­—åˆ—ã‚’åˆ†è§£ã—ã¦æ—¥ä»˜æ›¸å¼ã«ã—ãŸã‹ã£ãŸã ã‘ã€‚ã¾ã‚ã‚„ã‚Šæ–¹ã¯ã€è‰²ã€…ã‚ã‚‹ã‚“ã§ã™ãŒã‚·ãƒ³ãƒ—ãƒ«ã«ã—ãŸã‹ã£ãŸãªã¨ã„ã†ã“ã¨ã§æ ¼é—˜ã—ã¦ã¾ã—ãŸã€‚

```text:test.json
{
  "dateTime": "20170904152510701",
  "tempoCode": "Y123456"
}
```

ã‚’ã€ä¸‹è¨˜ã®ã‚ˆã†ã«ã€‚

```text
2017/09/04      Y123456
```

sedä½¿ã£ãŸã¡ã‚‡ã£ã¨ãˆãã„æ„Ÿã˜ï½—

```bash:cmd
jq -r '[.dateTime, .tempoCode] | @tsv' | sed 's/^\(.\{4\}\)\(.\{2\}\)\(.\{2\}\)\(.\{2\}\)\(.\{2\}\)\(.\{2\}\)\(.\{3\}\)/\1\/\2\/\3/g'
```

ã‹ã£ã“æ‚ªã„ï½—ã€‚ãªã®ã§

```bash:cmd
jq -r '[ .dateTime[:4] + "/" + .dateTime[4:6] + "/" + .dateTime[6:8], .tempoCode ] | @tsv '
```

ã§ããŸãƒ¼ï½—

# ä¾¿åˆ©ã‚„ã‚
json ãƒ‡ãƒ¼ã‚¿ã‚’åŠ å·¥ã™ã‚‹ãŸã‚ã« php ã‚„ã‚‰ perl ã§æ›¸ã„ã¦ã„ãŸã“ã¨ã‚’æ€ã†ã¨ã‚³ãƒžãƒ³ãƒ‰ã§ã§ãã¦éžå¸¸ã«ä¾¿åˆ©ã€ã—ã‹ã‚‚ã‚‚ã£ã¨é«˜åº¦ãªã“ã¨ã‚‚ã§ãã‚‹ã€‚

# å‚è€ƒã«ã•ã›ã¦é ‚ã„ãŸã‚µã‚¤ãƒˆ
>+ [jq ã‚³ãƒžãƒ³ãƒ‰ã‚’ä½¿ã†æ—¥å¸¸ã®ã”ç´¹ä»‹](http://qiita.com/takeshinoda@github/items/2dec7a72930ec1f658af)
>+ [jqã§csvã‚’jsonã«å¤‰æ›ã™ã‚‹](http://qiita.com/shobyshoby/items/68204f8567efbd32d705)
>+ [jqã§REST APIã®çµæžœã‚’æ•´å½¢ã™ã‚‹](http://qiita.com/niwashun/items/48ad5d55ff76c4a0cdce)
>+ [è»½é‡JSONãƒ‘ãƒ¼ã‚µãƒ¼ã€Žjqã€ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼šã€Žjq Manualã€ã‚’ã–ã£ãã‚Šæ—¥æœ¬èªžè¨³ã—ã¦ã¿ã¾ã—ãŸ](http://dev.classmethod.jp/tool/jq-manual-japanese-translation-roughly/)
>+ [jqã§è¤‡æ•°ã®æ—¥ä»˜ãƒ»æ™‚åˆ»å½¢å¼ã§strptimeã‚’è©¦ã¿ã‚‹æ–¹æ³•](http://qiita.com/mumoshu/items/9d9fc23efe95a4b34e97)
>+ [JSON Tools: Jq](http://hyperpolyglot.org/json)







